<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Sistem YÃ¶netimi (Admin)</title>
    <style>
        body { background: #0B0F19; color: white; font-family: sans-serif; padding: 40px; }
        .header { border-bottom: 2px solid #EF4444; padding-bottom: 10px; margin-bottom: 20px; color: #EF4444; }
        .panel { background: #1E293B; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #334155; }
        input { padding: 10px; border-radius: 5px; border: none; background: #0F172A; color: white; margin-right: 10px; }
        button { padding: 10px 15px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; color: white; }
        .btn-vip { background: #F59E0B; }
        .btn-ban { background: #EF4444; }
        #user-list { margin-top: 20px; background: #0F172A; padding: 15px; border-radius: 10px; }
    </style>
</head>
<body>

    <h1 class="header">ğŸ›¡ï¸ YÃ–NETÄ°CÄ° PANELÄ°</h1>
    
    <div class="panel">
        <h3>KullanÄ±cÄ± Ä°ÅŸlemleri</h3>
        <p style="color: gray; font-size: 14px; margin-bottom: 15px;">Ä°ÅŸlem yapmak istediÄŸiniz kullanÄ±cÄ± adÄ±nÄ± girin.</p>
        
        <input type="text" id="target-user" placeholder="KullanÄ±cÄ± AdÄ±">
        <button class="btn-vip" onclick="islemYap('vip')">ğŸ’ VIP Ver / Al</button>
        <button class="btn-ban" onclick="islemYap('ban')">ğŸ”¨ Ban At / KaldÄ±r</button>
    </div>

    <div class="panel">
        <h3>VeritabanÄ±ndaki Hesaplar</h3>
        <button onclick="kullanicilariGetir()" style="background:#38BDF8;">Listeyi Yenile</button>
        <div id="user-list">Listeyi gÃ¶rmek iÃ§in yenileye bas.</div>
    </div>

    <script>
        // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda gerÃ§ekten admin mi diye kontrol et!
        if(localStorage.getItem('activeUser') !== 'tutus' || localStorage.getItem('isAdmin') !== 'true') {
            document.body.innerHTML = "<h1 style='color:red; text-align:center;'>YETKÄ°SÄ°Z GÄ°RÄ°Å!</h1>";
            setTimeout(() => { window.location.href = "login.html"; }, 2000);
        }

        function islemYap(tip) {
            const target = document.getElementById('target-user').value.trim();
            if(!target) return alert("Bir kullanÄ±cÄ± adÄ± girin!");

            let db = JSON.parse(localStorage.getItem('winterDB')) || {};
            
            if(!db[target]) return alert("VeritabanÄ±nda bÃ¶yle bir kullanÄ±cÄ± yok!");

            if(tip === 'vip') {
                db[target].isVip = !db[target].isVip; // Durumu tersine Ã§evir
                alert(`${target} adlÄ± kullanÄ±cÄ±nÄ±n VIP durumu: ${db[target].isVip ? 'AKTÄ°F' : 'KAPALI'}`);
            } else if (tip === 'ban') {
                db[target].isBanned = !db[target].isBanned;
                alert(`${target} adlÄ± kullanÄ±cÄ±nÄ±n BAN durumu: ${db[target].isBanned ? 'BANLANDI' : 'KALDIRILDI'}`);
            }

            // VeritabanÄ±nÄ± kaydet
            localStorage.setItem('winterDB', JSON.stringify(db));
            kullanicilariGetir(); // Listeyi gÃ¼ncelle
        }

        function kullanicilariGetir() {
            let db = JSON.parse(localStorage.getItem('winterDB')) || {};
            let liste = "";
            for (let user in db) {
                let vipDurum = db[user].isVip ? "ğŸ’ VIP" : "Ãœye";
                let banDurum = db[user].isBanned ? "âŒ BANLI" : "Temiz";
                liste += `<p><b>${user}</b> - Åifre: ${db[user].password} | Durum: ${vipDurum} | Sicil: ${banDurum}</p>`;
            }
            document.getElementById('user-list').innerHTML = liste || "HenÃ¼z kayÄ±tlÄ± kullanÄ±cÄ± yok.";
        }
    </script>
</body>
</html>