<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WinterChat v3 - VIP SÃ¼rÃ¼mÃ¼</title>
    <script src="https://unpkg.com/peerjs@1.5.1/dist/peerjs.min.js"></script>
    <style>
        /* Modern, KaranlÄ±k Tema ve Animasyonlar */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { 
            height: 100vh; display: flex; background-color: #0F172A; color: #F8FAFC; overflow: hidden;
        }

        /* --- SOL MENÃœ (KOLAY NAVÄ°GASYON) --- */
        .sidebar {
            width: 280px; background-color: #1E293B; display: flex; flex-direction: column; 
            border-right: 1px solid #334155; z-index: 10;
        }
        .logo-area { padding: 25px 20px; font-size: 24px; font-weight: 900; letter-spacing: 1px; border-bottom: 1px solid #334155; }
        .logo-area span { color: #38BDF8; }
        .logo-area.vip span { color: #F59E0B; text-shadow: 0 0 10px rgba(245, 158, 11, 0.5); } /* VIP Rengi */

        .menu-items { flex: 1; padding: 20px 10px; display: flex; flex-direction: column; gap: 5px; }
        .menu-btn {
            padding: 15px 20px; border-radius: 12px; cursor: pointer; font-weight: bold; color: #94A3B8; 
            display: flex; align-items: center; gap: 10px; transition: 0.2s;
        }
        .menu-btn:hover { background-color: #334155; color: white; }
        .menu-btn.active { background-color: #38BDF8; color: white; }
        
        /* Nitro/VIP Butonu Ã–zel TasarÄ±m */
        .menu-btn.premium-btn { 
            background: linear-gradient(45deg, #F59E0B, #D97706); color: white; 
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3); margin-top: auto; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

        /* KullanÄ±cÄ± Profili (Sol Alt) */
        .profile-area { padding: 20px; background-color: #0F172A; display: flex; flex-direction: column; gap: 10px; border-top: 1px solid #334155; }
        .my-id-box { 
            background: #1E293B; padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; 
            letter-spacing: 2px; color: #38BDF8; border: 1px dashed #475569; cursor: pointer;
        }
        .vip-badge { display: none; background: #F59E0B; color: black; font-size: 10px; padding: 2px 6px; border-radius: 4px; vertical-align: middle; margin-left: 5px; font-weight: 900;}

        /* --- ANA Ä°Ã‡ERÄ°K ALANI --- */
        .main-content { flex: 1; display: flex; flex-direction: column; position: relative; }
        
        /* Reklam AlanÄ± (Google AdSense iÃ§in yer) */
        .ad-banner {
            background-color: #1E293B; border-bottom: 1px solid #334155; padding: 10px;
            display: flex; justify-content: center; align-items: center; height: 60px;
            color: #64748B; font-size: 14px; font-weight: bold; letter-spacing: 2px;
        }

        /* Sayfalar (Sekmeler) */
        .page { display: none; flex: 1; flex-direction: column; overflow: hidden; }
        .page.active { display: flex; }

        /* -- 1. BAÄLANTI & SOHBET SAYFASI -- */
        .connect-bar { padding: 20px; background: #1E293B; display: flex; gap: 10px; align-items: center; border-bottom: 1px solid #334155; }
        .connect-bar input { flex: 1; padding: 12px; border-radius: 8px; border: none; background: #0F172A; color: white; outline: none; }
        .connect-bar button { padding: 12px 25px; border-radius: 8px; border: none; background: #38BDF8; color: white; font-weight: bold; cursor: pointer; transition: 0.2s;}
        .connect-bar button:hover { background: #0284C7; }

        .chat-area { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 70%; padding: 12px 16px; border-radius: 12px; font-size: 15px; line-height: 1.4; }
        .msg.me { align-self: flex-end; background: #38BDF8; border-bottom-right-radius: 2px; }
        .msg.me.vip-msg { background: linear-gradient(45deg, #F59E0B, #D97706); box-shadow: 0 2px 10px rgba(245, 158, 11, 0.3); } /* VIP Mesaj Rengi */
        .msg.other { align-self: flex-start; background: #334155; border-bottom-left-radius: 2px; }

        .input-area { padding: 20px; background: #1E293B; display: flex; gap: 10px; }
        .input-area input { flex: 1; padding: 15px; border-radius: 10px; border: none; background: #0F172A; color: white; outline: none; }

        /* -- 2. FROST VIP (SATIN ALMA) SAYFASI -- */
        .vip-page-content { padding: 40px; text-align: center; overflow-y: auto; }
        .vip-title { font-size: 36px; font-weight: 900; color: #F59E0B; margin-bottom: 20px; }
        .vip-cards { display: flex; justify-content: center; gap: 30px; margin-top: 40px; }
        .vip-card { 
            background: #1E293B; padding: 30px; border-radius: 20px; width: 300px; 
            border: 2px solid #334155; transition: 0.3s;
        }
        .vip-card:hover { border-color: #F59E0B; transform: translateY(-10px); }
        .vip-price { font-size: 40px; font-weight: bold; margin: 20px 0; color: white; }
        .vip-features { text-align: left; margin-bottom: 30px; line-height: 2; color: #CBD5E1; }
        .buy-btn { width: 100%; padding: 15px; border-radius: 10px; border: none; background: #F59E0B; color: black; font-size: 18px; font-weight: bold; cursor: pointer; }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo-area" id="logo">â„ï¸ Winter<span>Chat</span></div>
        
        <div class="menu-items">
            <div class="menu-btn active" onclick="changePage('chatPage', this)">ğŸ’¬ Sohbet & BaÄŸlantÄ±</div>
            <div class="menu-btn" onclick="changePage('boardPage', this)">ğŸ—ºï¸ Taktik TahtasÄ±</div>
            <div class="menu-btn premium-btn" id="vipMenuBtn" onclick="changePage('vipPage', this)">ğŸ’ Frost VIP Al</div>
        </div>

        <div class="profile-area">
            <div style="font-size: 12px; color: #94A3B8;">Senin Kodun:</div>
            <div class="my-id-box" id="my-id" onclick="copyId()">YÃ¼kleniyor...</div>
            <div style="font-size: 14px; font-weight: bold; margin-top: 10px;">
                Durum: <span id="conn-status" style="color: #EF4444;">BaÄŸlÄ± DeÄŸil</span>
                <span class="vip-badge" id="myVipBadge">VIP</span>
            </div>
        </div>
    </div>

    <div class="main-content">
        
        <div class="ad-banner" id="adBanner">
            [GOOGLE ADSENSE REKLAM ALANI - TÄ±klama BaÅŸÄ±na Para Kazan]
        </div>

        <div id="chatPage" class="page active">
            <div class="connect-bar">
                <input type="text" id="friend-id-input" placeholder="ArkadaÅŸÄ±nÄ±n Kodunu Gir...">
                <button onclick="connectToFriend()">BaÄŸlan</button>
            </div>
            
            <div class="chat-area" id="chat-box">
                <div class="msg other" style="align-self: center; background: transparent;">BaÄŸlantÄ± Bekleniyor...</div>
            </div>

            <div class="input-area">
                <input type="text" id="msg-input" placeholder="Mesaja yaz..." onkeypress="handleEnter(event)">
                <button onclick="sendMessage()" style="padding: 0 25px; border-radius: 10px; border: none; background: #38BDF8; color: white; font-weight: bold; cursor:pointer;">GÃ¶nder</button>
            </div>
        </div>

        <div id="boardPage" class="page">
            <div style="padding: 20px; color: white; text-align: center; margin-top: 50px;">
                <h2>ğŸ—ºï¸ Ortak Tahta (YakÄ±nda)</h2>
                <p style="color: #64748B; margin-top: 10px;">BurasÄ± maÃ§ Ã¶ncesi taktik Ã§izme alanÄ± olacak.</p>
            </div>
        </div>

        <div id="vipPage" class="page">
            <div class="vip-page-content">
                <div class="vip-title">ğŸ’ Frost VIP AyrÄ±calÄ±klarÄ±</div>
                <p style="color: #94A3B8; font-size: 18px;">UygulamayÄ± reklamsÄ±z ve premium Ã¶zelliklerle kullanÄ±n!</p>
                
                <div class="vip-cards">
                    <div class="vip-card">
                        <h2 style="color: #F59E0B;">AylÄ±k VIP</h2>
                        <div class="vip-price">â‚º49<span style="font-size: 16px; color:#64748B;">/ay</span></div>
                        <div class="vip-features">
                            âœ”ï¸ Tamamen ReklamsÄ±z Deneyim<br>
                            âœ”ï¸ Ä°sminin YanÄ±nda VIP Rozeti<br>
                            âœ”ï¸ Sohbet BaloncuÄŸu AltÄ±n Renk Olur<br>
                            âœ”ï¸ YÃ¼ksek Kalite Ekran PaylaÅŸÄ±mÄ±
                        </div>
                        <button class="buy-btn" onclick="buyVIP()">Åimdi SatÄ±n Al</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. VIP (PREMÄ°UM) SÄ°STEMÄ° MANTIÄI ---
        // TarayÄ±cÄ±nÄ±n hafÄ±zasÄ±na bakar, daha Ã¶nce VIP alÄ±nmÄ±ÅŸ mÄ± kontrol eder
        let isVIP = localStorage.getItem('isWinterVIP') === 'true';

        function checkVIPStatus() {
            if(isVIP) {
                document.getElementById('adBanner').style.display = 'none'; // ReklamlarÄ± gizle
                document.getElementById('myVipBadge').style.display = 'inline-block'; // Rozeti gÃ¶ster
                document.getElementById('logo').classList.add('vip'); // Logoyu altÄ±n yap
                document.getElementById('vipMenuBtn').innerHTML = "ğŸ’ VIP Aktif"; // MenÃ¼ yazÄ±sÄ±nÄ± deÄŸiÅŸtir
            }
        }
        checkVIPStatus(); // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda kontrol et

        function buyVIP() {
            // BurasÄ± normalde Shopier/Patreon linkine yÃ¶nlendirir. 
            // Åimdilik simÃ¼lasyon yapÄ±yoruz.
            alert("Ã–deme sayfasÄ±na yÃ¶nlendiriliyorsunuz... (SimÃ¼lasyon)");
            
            // SatÄ±n alÄ±m baÅŸarÄ±lÄ± varsayalÄ±m:
            localStorage.setItem('isWinterVIP', 'true');
            isVIP = true;
            checkVIPStatus();
            alert("Tebrikler! Frost VIP hesabÄ±nÄ±za tanÄ±mlandÄ±. ArtÄ±k reklamsÄ±zsÄ±nÄ±z!");
            changePage('chatPage', document.querySelector('.menu-btn')); // Sohbete at
        }


        // --- 2. SAYFA (SEKME) DEÄÄ°ÅTÄ°RME MANTIÄI ---
        function changePage(pageId, btnElement) {
            // TÃ¼m sayfalarÄ± ve buton aktifliklerini sÄ±fÄ±rla
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
            
            // SeÃ§ileni aktif et
            document.getElementById(pageId).classList.add('active');
            btnElement.classList.add('active');
        }


        // --- 3. P2P AÄ BAÄLANTISI (PEERJS) ---
        const myShortCode = 'WNT-' + Math.floor(1000 + Math.random() * 9000);
        const peer = new Peer(myShortCode); 
        let currentConnection = null;

        peer.on('open', (id) => {
            document.getElementById('my-id').innerText = id;
        });

        function copyId() {
            navigator.clipboard.writeText(myShortCode);
            alert("Kod KopyalandÄ±!");
        }

        // Biri bize baÄŸlanÄ±rsa
        peer.on('connection', (conn) => {
            currentConnection = conn;
            setupEvents();
        });

        // Biz birine baÄŸlanÄ±rsak
        function connectToFriend() {
            const friendId = document.getElementById('friend-id-input').value.trim().toUpperCase();
            if (!friendId) return;
            currentConnection = peer.connect(friendId);
            setupEvents();
        }

        function setupEvents() {
            currentConnection.on('open', () => {
                document.getElementById('conn-status').innerText = "ğŸŸ¢ BaÄŸlÄ±";
                document.getElementById('conn-status').style.color = "#22C55E";
                document.getElementById('chat-box').innerHTML = `<div class="msg other" style="align-self:center;">Sohbet BaÅŸladÄ±!</div>`;
            });

            currentConnection.on('data', (data) => {
                if(data.type === 'chat') {
                    // KarÅŸÄ±dan gelen mesaj. EÄŸer karÅŸÄ± taraf VIP ise rengini ayarlayabiliriz.
                    addMessage("ArkadaÅŸ", data.content, "other", data.isVip);
                }
            });
        }

        // --- 4. SOHBET GÃ–NDERME ---
        function sendMessage() {
            const input = document.getElementById('msg-input');
            const text = input.value.trim();
            if(!text || !currentConnection) return;

            // Kendi VIP durumumuzu da karÅŸÄ±ya gÃ¶nderiyoruz ki onun ekranÄ±nda ÅŸekilli duralÄ±m
            currentConnection.send({ type: 'chat', content: text, isVip: isVIP });
            addMessage("Sen", text, "me", isVIP);
            input.value = '';
        }

        function handleEnter(e) { if(e.key === 'Enter') sendMessage(); }

        function addMessage(sender, content, type, senderIsVip) {
            const box = document.getElementById('chat-box');
            // EÄŸer gÃ¶nderen VIP ise mesaja Ã¶zel class ekle
            let vipClass = senderIsVip ? 'vip-msg' : '';
            
            box.innerHTML += `
                <div class="msg ${type} ${vipClass}">
                    ${senderIsVip && type==='other' ? 'ğŸ’ ' : ''}${content}
                </div>`;
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>
