<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Winter Fenomen Radyo</title>
    <style>
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: #0F172A; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .player-box { background: rgba(30, 41, 59, 0.9); backdrop-filter: blur(20px); padding: 40px; border-radius: 20px; text-align: center; border: 1px solid #334155; box-shadow: 0 10px 40px rgba(0,0,0,0.7); width: 400px; }
        
        /* AlbÃ¼m KapaÄŸÄ± Ã‡erÃ§evesi */
        .cover { width: 160px; height: 160px; background: #1E293B; border-radius: 50%; margin: 0 auto 20px; display: flex; justify-content: center; align-items: center; font-size: 50px; border: 5px solid #1E293B; box-shadow: 0 0 20px rgba(56, 189, 248, 0.4); animation: spin 8s linear infinite; animation-play-state: paused; overflow: hidden;}
        .cover img { width: 100%; height: 100%; object-fit: cover; }
        .cover.playing { animation-play-state: running; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .song-title { font-size: 22px; font-weight: 900; margin-bottom: 5px; color: #F8FAFC; text-transform: uppercase; letter-spacing: 1px;}
        .artist { color: #38BDF8; font-size: 14px; font-weight: bold; margin-bottom: 5px; letter-spacing: 1px;}
        .channel-name { color: #94A3B8; font-size: 12px; margin-bottom: 25px; text-transform: uppercase;}
        
        /* Radyo Ä°stasyonlarÄ± */
        .stations { display: flex; gap: 10px; margin-bottom: 25px; justify-content: center;}
        .station-btn { flex: 1; padding: 12px 5px; background: #1E293B; border: 1px solid #475569; color: #94A3B8; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 12px;}
        .station-btn:hover { background: #334155; color: white; }
        .station-btn.active { background: #38BDF8; color: white; border-color: #38BDF8; box-shadow: 0 0 10px rgba(56, 189, 248, 0.3);}

        .controls { display: flex; justify-content: center; align-items: center; }
        .btn-play { background: #22C55E; color: white; border: none; width: 70px; height: 70px; border-radius: 50%; font-size: 28px; cursor: pointer; transition: 0.2s; box-shadow: 0 5px 15px rgba(34, 197, 94, 0.4);}
        .btn-play:hover { background: #16A34A; transform: scale(1.05); }
        .btn-play.playing { background: #EF4444; box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4); }
        
        .btn-back { margin-top: 30px; background: transparent; border: 1px solid #475569; color: #94A3B8; padding: 12px 20px; border-radius: 8px; cursor: pointer; transition: 0.2s; width: 100%; font-weight: bold;}
        .btn-back:hover { background: #334155; color: white;}
    </style>
</head>
<body>
    <div class="player-box">
        <div class="cover" id="disc">
            ğŸ”¥
        </div>
        <div class="song-title" id="songTitle">YÃ¼kleniyor...</div>
        <div class="artist" id="artistName">BaÄŸlantÄ± Kuruluyor</div>
        <div class="channel-name" id="channelName">RADYO FENOMEN</div>
        
        <audio id="audio" crossorigin="anonymous"></audio>
        
        <div class="stations">
            <button class="station-btn active" id="btn-fenomen" onclick="kanalDegistir('FENOMEN', this)">ğŸ”¥ FENOMEN</button>
            <button class="station-btn" onclick="kanalDegistir('FENOMEN_TURK', this)">ğŸ‡¹ğŸ‡· TÃœRK</button>
            <button class="station-btn" onclick="kanalDegistir('FENOMEN_RAP', this)">ğŸ¤ RAP</button>
        </div>

        <div class="controls">
            <button class="btn-play" id="playBtn" onclick="togglePlay()">â–¶</button>
        </div>

        <button class="btn-back" onclick="window.location.href='index.html'">Ana Sayfaya DÃ¶n</button>
    </div>

    <script>
        // Senin GetirdiÄŸin Profesyonel API Kodu
        function Fenomen() {
            const URI = "https://api.radyofenomen.com/Channels/";
            const QUERY_STRING = "/?appRef=FenomenWebV2";
            const AUDIO_URI = "https://listen.radyofenomen.com/";
            let defaultQuality = 128;

            this.channels = {
                FENOMEN: { name: "fenomen", url: URI + "radyofenomen" + QUERY_STRING },
                FENOMEN_TURK: { name: "fenomenturk", url: URI + "fenomenturk" + QUERY_STRING },
                FENOMEN_RAP: { name: "fenomenrap", url: URI + "fenomenrap" + QUERY_STRING }
                // Ä°stediÄŸin diÄŸer kanallarÄ± da buraya ekleyebilirsin
            }

            this.get = function (callback, channel, quality = 128) {
                fetch(channel.url)
                .then(data => data.json())
                .then(json => {
                    let obj = {
                        audio: { src: AUDIO_URI + channel.name + "/" + quality + "/icecast.audio" },
                        channel: { name: json.response.channel_name },
                        song: {
                            artist: json.response.timeline[0].artistTitle,
                            title: json.response.timeline[0].songTitle,
                            albumCover: json.response.timeline[0].albumCoverIMG
                        }
                    }
                    callback(obj);
                }).catch(e => console.log("API HatasÄ±:", e));
            }
        }

        // --- MÃ¼zik Ã‡alar Kontrol Sistemi ---
        const radyoApi = new Fenomen();
        const audio = document.getElementById('audio');
        const playBtn = document.getElementById('playBtn');
        const disc = document.getElementById('disc');
        
        let aktifKanal = radyoApi.channels.FENOMEN;
        let isPlaying = false;
        let sarkiGuncelleyici;

        function sarkiyiGuncelle() {
            radyoApi.get(function(data) {
                // ÅarkÄ± adÄ±nÄ± ve sanatÃ§Ä±yÄ± ekrana yaz
                document.getElementById('songTitle').innerText = data.song.title || "Reklam / Anons";
                document.getElementById('artistName').innerText = data.song.artist || "Fenomen";
                document.getElementById('channelName').innerText = data.channel.name;

                // AlbÃ¼m kapaÄŸÄ±nÄ± gÃ¼ncelle
                if(data.song.albumCover) {
                    disc.innerHTML = `<img src="${data.song.albumCover}" alt="AlbÃ¼m KapaÄŸÄ±">`;
                } else {
                    disc.innerHTML = "ğŸ”¥";
                }

                // Sadece kanal ilk defa seÃ§ildiÄŸinde ses kaynaÄŸÄ±nÄ± deÄŸiÅŸtir
                if(audio.src !== data.audio.src) {
                    audio.src = data.audio.src;
                    if(isPlaying) audio.play();
                }
            }, aktifKanal);
        }

        function kanalDegistir(kanalKey, btnElement) {
            // Buton renklerini ayarla
            document.querySelectorAll('.station-btn').forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');

            // KanalÄ± deÄŸiÅŸtir ve verileri anÄ±nda Ã§ek
            aktifKanal = radyoApi.channels[kanalKey];
            sarkiyiGuncelle();
        }

        function togglePlay() {
            if (isPlaying) {
                audio.pause();
                playBtn.innerText = "â–¶";
                playBtn.classList.remove('playing');
                disc.classList.remove('playing');
            } else {
                audio.play();
                playBtn.innerText = "â¸";
                playBtn.classList.add('playing');
                disc.classList.add('playing');
            }
            isPlaying = !isPlaying;
        }

        // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda ilk verileri Ã§ek
        sarkiyiGuncelle();

        // Her 15 saniyede bir apiye baÄŸlanÄ±p ÅŸarkÄ± deÄŸiÅŸti mi diye kontrol et
        sarkiGuncelleyici = setInterval(sarkiyiGuncelle, 15000);

    </script>
</body>
</html>
